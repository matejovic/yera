import {
  F,
  k,
  l,
  y
} from "./chunk-CTSDWTOA.js";
import "./chunk-76J2PTFD.js";

// node_modules/preact-render-to-string/dist/index.module.js
var o = /[\s\n\\/='"\0<>]/;
var a = /^(xlink|xmlns|xml)([A-Z])/;
var n = /^accessK|^auto[A-Z]|^ch|^col|cont|cross|dateT|encT|form[A-Z]|frame|hrefL|inputM|maxL|minL|noV|playsI|readO|rowS|spellC|src[A-Z]|tabI|item[A-Z]/;
var i = /^ac|^ali|arabic|basel|cap|clipPath$|clipRule$|color|dominant|enable|fill|flood|font|glyph[^R]|horiz|image|letter|lighting|marker[^WUH]|overline|panose|pointe|paint|rendering|shape|stop|strikethrough|stroke|text[^L]|transform|underline|unicode|units|^v[^i]|^w|^xH/;
var l2 = /["&<]/;
function s(e) {
  if (0 === e.length || false === l2.test(e))
    return e;
  for (var t = 0, r = 0, o2 = "", a2 = ""; r < e.length; r++) {
    switch (e.charCodeAt(r)) {
      case 34:
        a2 = "&quot;";
        break;
      case 38:
        a2 = "&amp;";
        break;
      case 60:
        a2 = "&lt;";
        break;
      default:
        continue;
    }
    r !== t && (o2 += e.slice(t, r)), o2 += a2, t = r + 1;
  }
  return r !== t && (o2 += e.slice(t, r)), o2;
}
var c = {};
var p = /* @__PURE__ */ new Set(["animation-iteration-count", "border-image-outset", "border-image-slice", "border-image-width", "box-flex", "box-flex-group", "box-ordinal-group", "column-count", "fill-opacity", "flex", "flex-grow", "flex-negative", "flex-order", "flex-positive", "flex-shrink", "flood-opacity", "font-weight", "grid-column", "grid-row", "line-clamp", "line-height", "opacity", "order", "orphans", "stop-opacity", "stroke-dasharray", "stroke-dashoffset", "stroke-miterlimit", "stroke-opacity", "stroke-width", "tab-size", "widows", "z-index", "zoom"]);
var u = /[A-Z]/g;
function _(e) {
  var t = "";
  for (var r in e) {
    var o2 = e[r];
    if (null != o2 && "" !== o2) {
      var a2 = "-" == r[0] ? r : c[r] || (c[r] = r.replace(u, "-$&").toLowerCase()), n2 = ";";
      "number" != typeof o2 || a2.startsWith("--") || p.has(a2) || (n2 = "px;"), t = t + a2 + ":" + o2 + n2;
    }
  }
  return t || void 0;
}
var d;
var f;
var h;
var m;
var v = [];
var g = Array.isArray;
var y2 = Object.assign;
function b(o2, a2) {
  var n2 = l.__s;
  l.__s = true, d = l.__b, f = l.diffed, h = l.__r, m = l.unmount;
  var i2 = y(k, null);
  i2.__k = [o2];
  try {
    return C(o2, a2 || x, false, void 0, i2);
  } finally {
    l.__c && l.__c(o2, v), l.__s = n2, v.length = 0;
  }
}
function k2() {
  this.__d = true;
}
var x = {};
function w(e, t) {
  var r, o2 = e.type, a2 = true;
  return e.__c ? (a2 = false, (r = e.__c).state = r.__s) : r = new o2(e.props, t), e.__c = r, r.__v = e, r.props = e.props, r.context = t, r.__d = true, null == r.state && (r.state = x), null == r.__s && (r.__s = r.state), o2.getDerivedStateFromProps ? r.state = y2({}, r.state, o2.getDerivedStateFromProps(r.props, r.state)) : a2 && r.componentWillMount ? (r.componentWillMount(), r.state = r.__s !== r.state ? r.__s : r.state) : !a2 && r.componentWillUpdate && r.componentWillUpdate(), h && h(e), r.render(r.props, r.state, t);
}
function C(t, l3, c2, p2, u2) {
  if (null == t || true === t || false === t || "" === t)
    return "";
  if ("object" != typeof t)
    return "function" == typeof t ? "" : s(t + "");
  if (g(t)) {
    var v2 = "";
    u2.__k = t;
    for (var b2 = 0; b2 < t.length; b2++) {
      var x2 = t[b2];
      null != x2 && "boolean" != typeof x2 && (v2 += C(x2, l3, c2, p2, u2));
    }
    return v2;
  }
  if (void 0 !== t.constructor)
    return "";
  t.__ = u2, d && d(t);
  var A, L, D, E = t.type, T = t.props, Z = l3;
  if ("function" == typeof E) {
    if (E === k) {
      if (T.UNSTABLE_comment)
        return "<!--" + s(T.UNSTABLE_comment || "") + "-->";
      L = T.children;
    } else {
      if (null != (A = E.contextType)) {
        var F2 = l3[A.__c];
        Z = F2 ? F2.props.value : A.__;
      }
      if (E.prototype && "function" == typeof E.prototype.render)
        L = w(t, Z), D = t.__c;
      else {
        t.__c = D = { __v: t, props: T, context: Z, setState: k2, forceUpdate: k2, __d: true, __h: [] };
        for (var U = 0; D.__d && U++ < 25; )
          D.__d = false, h && h(t), L = E.call(D, T, Z);
        D.__d = true;
      }
      if (null != D.getChildContext && (l3 = y2({}, l3, D.getChildContext())), (E.getDerivedStateFromError || D.componentDidCatch) && l.errorBoundaries) {
        var W = "";
        L = null != L && L.type === k && null == L.key ? L.props.children : L;
        try {
          return W = C(L, l3, c2, p2, t);
        } catch (e) {
          return E.getDerivedStateFromError && (D.__s = E.getDerivedStateFromError(e)), D.componentDidCatch && D.componentDidCatch(e, {}), D.__d && (L = w(t, l3), null != (D = t.__c).getChildContext && (l3 = y2({}, l3, D.getChildContext())), W = C(L = null != L && L.type === k && null == L.key ? L.props.children : L, l3, c2, p2, t)), W;
        } finally {
          f && f(t), t.__ = void 0, m && m(t);
        }
      }
    }
    var $ = C(L = null != L && L.type === k && null == L.key ? L.props.children : L, l3, c2, p2, t);
    return f && f(t), t.__ = void 0, m && m(t), $;
  }
  var M, j = "<" + E, z = "";
  for (var H in T) {
    var q = T[H];
    switch (H) {
      case "children":
        M = q;
        continue;
      case "key":
      case "ref":
      case "__self":
      case "__source":
        continue;
      case "htmlFor":
        if ("for" in T)
          continue;
        H = "for";
        break;
      case "className":
        if ("class" in T)
          continue;
        H = "class";
        break;
      case "defaultChecked":
        H = "checked";
        break;
      case "defaultSelected":
        H = "selected";
        break;
      case "defaultValue":
      case "value":
        switch (H = "value", E) {
          case "textarea":
            M = q;
            continue;
          case "select":
            p2 = q;
            continue;
          case "option":
            p2 != q || "selected" in T || (j += " selected");
        }
        break;
      case "dangerouslySetInnerHTML":
        z = q && q.__html;
        continue;
      case "style":
        "object" == typeof q && (q = _(q));
        break;
      case "acceptCharset":
        H = "accept-charset";
        break;
      case "httpEquiv":
        H = "http-equiv";
        break;
      default:
        if (a.test(H))
          H = H.replace(a, "$1:$2").toLowerCase();
        else {
          if (o.test(H))
            continue;
          "-" !== H[4] && "draggable" !== H || null == q ? c2 ? i.test(H) && (H = "panose1" === H ? "panose-1" : H.replace(/([A-Z])/g, "-$1").toLowerCase()) : n.test(H) && (H = H.toLowerCase()) : q += "";
        }
    }
    null != q && false !== q && "function" != typeof q && (j = true === q || "" === q ? j + " " + H : j + " " + H + '="' + s(q + "") + '"');
  }
  if (o.test(E))
    throw new Error(E + " is not a valid HTML tag name in " + j + ">");
  return z || ("string" == typeof M ? z = s(M) : null != M && false !== M && true !== M && (z = C(M, l3, "svg" === E || "foreignObject" !== E && c2, p2, t))), f && f(t), t.__ = void 0, m && m(t), !z && S.has(E) ? j + "/>" : j + ">" + z + "</" + E + ">";
}
var S = /* @__PURE__ */ new Set(["area", "base", "br", "col", "command", "embed", "hr", "img", "input", "keygen", "link", "meta", "param", "source", "track", "wbr"]);
var index_module_default = b;

// node_modules/preact-iso/src/prerender.js
var vnodeHook;
var old = l.vnode;
l.vnode = (vnode) => {
  if (old)
    old(vnode);
  if (vnodeHook)
    vnodeHook(vnode);
};
async function prerender(vnode, options) {
  options = options || {};
  const maxDepth = options.maxDepth || 10;
  const props = options.props;
  let tries = 0;
  if (typeof vnode === "function") {
    vnode = y(vnode, props);
  } else if (props) {
    vnode = F(vnode, props);
  }
  const render = () => {
    if (++tries > maxDepth)
      return;
    try {
      return index_module_default(vnode);
    } catch (e) {
      if (e && e.then)
        return e.then(render);
      throw e;
    }
  };
  let links = /* @__PURE__ */ new Set();
  vnodeHook = ({ type, props: props2 }) => {
    if (type === "a" && props2 && props2.href && (!props2.target || props2.target === "_self")) {
      links.add(props2.href);
    }
  };
  try {
    let html = await render();
    html += `<script type="isodata"><\/script>`;
    return { html, links };
  } finally {
    vnodeHook = null;
  }
}
export {
  prerender as default
};
//# sourceMappingURL=prerender-AE5IIH7Q.js.map
